 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACEFILTERAPI=(function(){function ia(b,d,f){return b*(1-f)+d*f}function ya(b,d){var f=new XMLHttpRequest;f.open("GET",b,!0);f.withCredentials=!1;f.onreadystatechange=function(){4===f.readyState&&200===f.status&&d(f.responseText)};f.send()}function Aa(b,d,f){return Math.min(Math.max((f-b)/(d-b),0),1)}
function Da(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ea(b,d){var f=d%8;return b[(d-f)/8]>>7-f&1}
function Ga(b){var d=JSON.parse(b);b=d.ne;var f=d.nf,m=d.n,n="undefined"===typeof btoa?Buffer.from(d.data,"base64").toString("latin1"):atob(d.data),l=n.length,u;d=new Uint8Array(l);for(u=0;u<l;++u)d[u]=n.charCodeAt(u);n=new Float32Array(m);l=new Float32Array(f);u=b+f+1;var q,h;for(q=0;q<m;++q){var r=u*q;var w=0===Ea(d,r)?1:-1;var v=r+1;var E=1,I=0;for(h=v+b-1;h>=v;--h)I+=E*Ea(d,h),E*=2;h=I;v=d;E=r+1+b;I=l;var O=0,P=I.length;for(r=E;r<E+P;++r)I[O]=Ea(v,r),++O;for(r=v=0;r<f;++r)v+=l[r]*Math.pow(2,-r-
1);w=0===v&&0===h?0:w*(1+v)*Math.pow(2,1+h-Math.pow(2,b-1));n[q]=w}return n}
var t=function(){function b(g,B){g=a.createShader(g);a.shaderSource(g,B);a.compileShader(g);return a.getShaderParameter(g,a.COMPILE_STATUS)?g:!1}function d(g,B){g=b(a.VERTEX_SHADER,g);B=b(a.FRAGMENT_SHADER,B);var C=a.createProgram();a.attachShader(C,g);a.attachShader(C,B);a.linkProgram(C);return C}function f(g){void 0===g.Y&&(g.Y="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===g.sa&&(g.sa=["a0"]);void 0===g.da&&(g.da=
[2]);if(void 0===g.precision||"highp"===g.precision)g.precision=h;g.id=u++;void 0!==g.Pc&&g.Pc.forEach(function(C,da){g.c=g.c.replace(C,g.Da[da])});g.bb=0;g.da.forEach(function(C){g.bb+=4*C});g.Ca=d(g.Y,"precision "+g.precision+" float;\n"+g.c);g.m={};g.f.forEach(function(C){g.m[C]=a.getUniformLocation(g.Ca,C)});g.attributes={};g.ea=[];g.sa.forEach(function(C){var da=a.getAttribLocation(g.Ca,C);g.attributes[C]=da;g.ea.push(da)});if(g.h){a.useProgram(g.Ca);l=g;n=g.id;for(var B in g.h)a.uniform1i(g.m[B],
g.h[B])}g.Kd=!0}function m(g){Ha.Wc(K);n!==g.id&&(K.X(),n=g.id,l=g,a.useProgram(g.Ca),g.ea.forEach(function(B){0!==B&&a.enableVertexAttribArray(B)}))}var n=-1,l=!1,u=0,q=!1,h="highp",r=["u1"],w=["u0"],v={u1:0},E={u0:0},I={u1:0,u2:1},O={u3:0},P={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:r,h:v},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:r,h:v,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],h:I},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:r,h:v},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],h:I},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:r,h:v},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:r,h:v},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],h:E},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],h:E},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:r,h:v},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],h:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],h:v},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],h:v},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:w,h:E},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:w,h:E},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:w,h:E},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:w,h:E},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],h:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:w,h:E},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:w,h:E},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],h:E},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],h:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],h:v},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],h:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],h:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),h:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),h:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],h:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],h:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:r,h:v,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u28"],h:v,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u28"],h:v,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u29"],h:I},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u29"],h:I},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],h:O},s35:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],h:O},s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],h:v,precision:"lowp"},s37:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],h:v,precision:"lowp"},s38:{c:"uniform sampler2D u1,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u30","u31"],h:{u1:0,u30:1,u31:2}}},L={s39:{c:"uniform float u18,u32;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u32"],Da:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u18,u32,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u32".split(" "),Da:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},K={Ua:function(){return q},l:function(){if(!q){h="highp";for(var g in P)f(P[g],g);t.set("s0");a.enableVertexAttribArray(0);g=Ia.l();q=!0;return g}},Wb:function(g){g.forEach(function(B){K.fb(B)})},fb:function(g){P[g.id]=g;f(g,g.id)},ub:function(g,B,C){B||(B=g);P[B]=Object.create(L[g]);L[g].Da&&L[g].Da.forEach(function(da,wa){P[B].c=P[B].c.replace(new RegExp(da,"g"),C[wa])});f(P[B],B)},set:function(g){m(P[g])},
qc:function(g){return"undefined"!==typeof P[g]},vd:function(){return l.sd},X:function(){-1!==n&&(n=-1,l.ea.forEach(function(g){0!==g&&a.disableVertexAttribArray(g)}))},$a:function(){var g=0;l.ea.forEach(function(B,C){C=l.da[C];a.vertexAttribPointer(B,C,a.FLOAT,!1,l.bb,g);g+=4*C})},mb:function(){a.enableVertexAttribArray(0)},na:function(){a.vertexAttribPointer(l.ea[0],2,a.FLOAT,!1,8,0)},Ob:function(g,B){a.uniform1i(l.m[g],B)},u:function(g,B){a.uniform1f(l.m[g],B)},P:function(g,B,C){a.uniform2f(l.m[g],
B,C)},Xd:function(g,B){a.uniform2fv(l.m[g],B)},Yd:function(g,B){a.uniform3fv(l.m[g],B)},Xc:function(g,B,C,da){a.uniform3f(l.m[g],B,C,da)},Pb:function(g,B){a.uniform4fv(l.m[g],B)},Zd:function(g,B){a.uniformMatrix2fv(l.m[g],!1,B)},$d:function(g,B){a.uniformMatrix3fv(l.m[g],!1,B)},ae:function(g,B){a.uniformMatrix4fv(l.m[g],!1,B)},H:function(g,B){K.set(g);B.forEach(function(C){switch(C.type){case "4f":a.uniform4fv(l.m[C.name],C.value);break;case "3f":a.uniform3fv(l.m[C.name],C.value);break;case "2f":a.uniform2fv(l.m[C.name],
C.value);break;case "1f":a.uniform1f(l.m[C.name],C.value);break;case "1i":a.uniform1i(l.m[C.name],C.value);break;case "mat2":a.uniformMatrix2fv(l.m[C.name],!1,C.value);break;case "mat3":a.uniformMatrix3fv(l.m[C.name],!1,C.value);break;case "mat4":a.uniformMatrix4fv(l.m[C.name],!1,C.value)}})},Ed:function(){return"lowp"}};return K}(),a=!1,Ka=function(){function b(h){console.log("ERROR in ContextFeedForward : ",h);return!1}var d=!1,f=!1,m=!1,n=!1,l=!0,u=!1,q={w:function(){return d.width},L:function(){return d.height},
wd:function(){return d},ud:function(){return a},o:function(){return l},flush:function(){a.flush()},vc:function(){u||(u=new Uint8Array(d.width*d.height*4));a.readPixels(0,0,d.width,d.height,a.RGBA,a.UNSIGNED_BYTE,u);return u},yd:function(){return d.toDataURL("image/jpeg")},zd:function(){J.J();f||(f=document.createElement("canvas"),m=f.getContext("2d"));f.width=d.width;f.height=d.height;var h=q.vc(),r=m.createImageData(f.width,f.height),w,v,E=f.width,I=f.height,O=r.data;for(v=0;v<I;++v){var P=I-v-1;
for(w=0;w<E;++w){var L=4*(v*E+w);var K=4*(P*E+w);O[L]=h[K];O[L+1]=h[K+1];O[L+2]=h[K+2];O[L+3]=h[K+3]}}m.putImageData(r,0,0);return f.toDataURL("image/png")},xd:function(h){!f&&h&&(f=document.createElement("canvas"),m=f.getContext("2d"));var r=h?f:document.createElement("canvas");r.width=d.width;r.height=d.height;(h?m:r.getContext("2d")).drawImage(d,0,0);return r},l:function(h){h.jc&&!h.ha?d=document.getElementById(h.jc):h.ha&&(d=h.ha);d||(d=document.createElement("canvas"));d.width=h&&void 0!==h.width?
h.width:512;d.height=h&&void 0!==h.height?h.height:512;"undefined"===typeof h&&(h={});void 0===h.premultipliedAlpha&&(h.premultipliedAlpha=!1);void 0===h.wb&&(h.wb=!0);void 0===h.antialias&&(h.antialias=!1);var r={antialias:h.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:h.premultipliedAlpha,stencil:!1,depth:h.wb};a:{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var w=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);w=[parseInt(w[1],10),parseInt(w[2],10),
parseInt(w[3]||0,10)];if(12===w[0]||13===w[0]){w=!0;break a}}w=!1}w||(a=d.getContext("webgl2",r));a?l=!0:((a=d.getContext("webgl",r))||(a=d.getContext("experimental-webgl",r)),l=!1);if(!a)return b("WebGL is not enabled");(n=a.getExtension("WEBGL_lose_context"))&&d.addEventListener("webglcontextlost",h.Lc,!1);if(!Ja.l())return b("Not enough capabilities");if(!Ja.ec()&&l)return b("Your configuration cannot process color buffer float");a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);
a.disable(a.DITHER);a.disable(a.STENCIL_TEST);a.GENERATE_MIPMAP_HINT&&a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.disable(a.SAMPLE_COVERAGE);return!0},Cc:function(){if(!t.l())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0}};return q}(),Ha=function(){var b="undefined"===typeof t?JEShaders:t;return{Wc:function(d){b!==d&&(b.X(),b=d)},Ua:function(){return b.Ua()},na:function(){b.na()},$a:function(){b.$a()},X:function(){b.X()},set:function(d){b.set(d)}}}(),
N=function(){var b,d,f=0,m=-2,n=-2,l=!1,u={reset:function(){n=m=-2},l:function(){l||(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),d=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),a.STATIC_DRAW),u.fa(),l=!0)},a:function(q){var h=f++,r=q.T?q.T.length:0,w="undefined"===typeof q.mode?a.STATIC_DRAW:q.mode,v=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,
v);a.bufferData(a.ARRAY_BUFFER,q.Sb instanceof Float32Array?q.Sb:new Float32Array(q.Sb),w);m=h;if(q.T){var E=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,E);if(65536>q.T.length){var I=Uint16Array;var O=a.UNSIGNED_SHORT;var P=2}else I=Uint32Array,O=a.UNSIGNED_INT,P=4;a.bufferData(a.ELEMENT_ARRAY_BUFFER,q.T instanceof I?q.T:new I(q.T),w);n=h}var L={dc:function(K){m!==h&&(a.bindBuffer(a.ARRAY_BUFFER,v),m=h);K&&Ha.$a()},bc:function(){n!==h&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,E),n=h)},bind:function(K){L.dc(K);
L.bc()},qd:function(){a.drawElements(a.TRIANGLES,r,O,0)},rd:function(K,g){a.drawElements(a.TRIANGLES,K,O,g*P)},remove:function(){a.deleteBuffer(v);q.T&&a.deleteBuffer(E);L=null}};return L},fa:function(){-1!==m&&(a.bindBuffer(a.ARRAY_BUFFER,b),m=-1);-1!==n&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d),n=-1)},g:function(q,h){q&&N.fa();h&&Ha.na();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},uc:function(){a.deleteBuffer(b);a.deleteBuffer(d)}};return u}(),J=function(){var b,d,f,m=!1,n={v:-2,sc:1};return{l:function(){if(!m){b=
a.createFramebuffer();var l=Ja.o();d=l&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;f=l&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;m=!0}},Bd:function(){return d},Qa:function(){return f},aa:function(){return a.FRAMEBUFFER},Fd:function(){return n},td:function(){return b},a:function(l){void 0===l.vb&&(l.vb=!1);var u=l.oa?l.oa:!1,q=l.width,h=void 0!==l.height?l.height:l.width,r=b,w=!1,v=!1,E=0;u&&(q=q?q:u.w(),h=h?h:u.L());var I={Nb:function(){v||(r=a.createFramebuffer(),v=!0,E=n.sc++)},
Vb:function(){I.Nb();I.j();w=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,w);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,q,h);a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,w);a.clearDepth(1)},bind:function(O,P){E!==n.v&&(a.bindFramebuffer(d,r),n.v=E);u&&u.j();P&&a.viewport(0,0,q,h);O&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},jd:function(){E!==n.v&&(a.bindFramebuffer(d,r),n.v=E)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},md:function(){a.clear(a.COLOR_BUFFER_BIT)},
nd:function(){a.clear(a.DEPTH_BUFFER_BIT)},Yc:function(){a.viewport(0,0,q,h)},j:function(){E!==n.v&&(a.bindFramebuffer(d,r),n.v=E)},rtt:function(O){u=O;n.v!==E&&(a.bindFramebuffer(a.FRAMEBUFFER,r),n.v=E);O.j()},J:function(){a.bindFramebuffer(d,null);n.v=-1},resize:function(O,P){q=O;h=P;w&&(a.bindRenderbuffer(a.RENDERBUFFER,w),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,q,h))},remove:function(){a.bindFramebuffer(d,r);a.framebufferTexture2D(d,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0);w&&
a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null);a.bindFramebuffer(d,null);a.deleteFramebuffer(r);w&&a.deleteRenderbuffer(w);I=null}};l.vb&&I.Vb();return I},J:function(){a.bindFramebuffer(d,null);n.v=-1},dd:function(){a.bindFramebuffer(d,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,Ja.w(),Ja.L());n.v=-1},reset:function(){n.v=-2},R:function(){0!==n.v&&(a.bindFramebuffer(d,b),n.v=0)},clear:function(){a.viewport(0,0,Ja.w(),Ja.L());a.clear(a.COLOR_BUFFER_BIT)}}}(),
W=function(){function b(c){a.bindTexture(a.TEXTURE_2D,c)}function d(c){wa[0]=c;c=Ba[0];var H=c>>16&32768,M=c>>12&2047,S=c>>23&255;return 103>S?H:142<S?H|31744|((255==S?0:1)&&c&8388607):113>S?(M|=2048,H|(M>>114-S)+(M>>113-S&1)):H=(H|S-112<<10|M>>1)+(M&1)}function f(c){var H=new Uint16Array(c.length);c.forEach(function(M,S){H[S]=d(M)});return H}function m(){if(null!==oa.Ra)return oa.Ra;var c=l(f([1,1,1,1]));return null===c?!0:oa.Ra=c}function n(){if(null!==oa.Sa)return oa.Sa;var c=l(new Uint8Array([255,
255,255,255]));return null===c?!0:oa.Sa=c}function l(c){if(!Ha.Ua()||!O)return null;try{var H=a.getError(),M=ba.a({isFloat:!1,I:!0,array:c,width:1});H=a.getError();if(H!==a.NO_ERROR)return!1}catch(S){return!1}J.J();a.viewport(0,0,1,1);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);Ha.set("s0");M.hb(0);N.g(!1,!0);c=new Uint8Array(4);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,c);c=.9<c[0];M.remove();J.R();return c}var u=0,q,h=0,r,w=!1,v,E,I,O=!1,P=!1,L,K,g,B=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,
0,1]],C=!1,da=!1,wa=new Float32Array(1),Ba=new Int32Array(wa.buffer),oa={Ra:null,Sa:null},ba={l:function(){if(!O){E=[a.RGB,!1,a.RGB,a.RGBA];I=[a.RGB,!1,a.RGB,a.RGBA];q=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];C="undefined"!==typeof JEContext;da="undefined"!==typeof Ja;C&&JEContext.Rd()&&q.push(a.TEXTURE8,a.TEXTURE9);r=[-1,-1,-1,-1,-1,-1,-1,-1];v=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!w){for(var c=new Float32Array(16384),H=0;16384>H;++H)c[H]=2*Math.random()-
1;w={random:ba.a({isFloat:!0,isPot:!0,array:c,width:64}),Rb:ba.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}O=!0}},Bc:function(){ba.ed()},Id:function(){return w.Rb},ed:function(){v[1]=Ja.va()},Sc:function(){I=E=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},Td:function(c,H){t.set("s1");J.J();var M=c.w(),S=c.L();a.viewport(0,0,M,S);c.b(0);N.g(!1,!1);a.readPixels(0,0,M,S,a.RGBA,a.UNSIGNED_BYTE,H)},tc:function(c,H,M){a.activeTexture(a.TEXTURE0);u=0;var S=a.createTexture();b(S);var Z=Ja.o()&&a.RGBA32F?
a.RGBA32F:a.FLOAT;H=H instanceof Float32Array?H:new Float32Array(H);var X=Math.log2(H.length);X!==Math.floor(X)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,M);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c.w(),c.L(),0,a.RGBA,Z,H);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
!1);J.R();t.set("s0");c.A();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);b(S);N.g(!0,!1);a.deleteTexture(S)},a:function(c){function H(){b(Y);pa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,pa);c.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,c.zb?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,c.U?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));c.xa&&"undefined"!==
typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.Ad().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.gd);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c.isLinear?a.LINEAR:a.NEAREST);c.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,c.isMipmap&&!sa?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,c.isMipmap&&!sa?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);ea=E[c.la-1];aa=I[c.la-1];fa=v[M];if(Ja.o()){var k=a.RGBA32F;ea===a.RGBA&&fa===a.FLOAT&&k&&(aa=k);ea===
a.RGB&&fa===a.FLOAT&&k&&(aa=k,ea=a.RGBA)}if(c.I&&!c.isFloat||c.isFloat&&c.isMipmap&&Ia.Ec())(k=a.RGBA16F)&&(aa=k),fa=Ja.va();c.Cb&&"undefined"!==typeof a.texStorage2D&&(la=c.Cb);c.Ab&&4===c.la&&(ea=JEContext.Gd());if(c.D)a.texImage2D(a.TEXTURE_2D,0,aa,ea,fa,c.D);else if(c.url)a.texImage2D(a.TEXTURE_2D,0,aa,ea,fa,G);else if(U){try{a.getError(),a.texImage2D(a.TEXTURE_2D,0,aa,D,y,0,ea,fa,U),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,aa,D,y,0,ea,fa,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,
0,a.RGBA,D,y,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(p){a.texImage2D(a.TEXTURE_2D,0,aa,D,y,0,ea,fa,null)}c.isKeepArray||(U=null)}else a.texImage2D(a.TEXTURE_2D,0,aa,D,y,0,ea,fa,null);if(c.isMipmap)if(!sa&&V)V.Pa(),za=!0;else if(sa){k=Math.log(Math.min(D,y))/Math.log(2);var A;va=Array(1+k);va[0]=Y;for(A=1;A<=k;++A){var ma=Math.pow(2,A);var ta=D/ma;ma=y/ma;var e=a.createTexture();b(e);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);
a.texImage2D(a.TEXTURE_2D,0,aa,ta,ma,0,ea,fa,null);b(null);va[A]=e}za=!0}b(null);r[u]=-1;pa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);x=!0;ca&&V&&(ca(V),ca=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.I&&(c.I=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.Ha&&(c.Ha=!1);void 0===c.xa&&(c.xa=!1);void 0===c.U&&(c.U=!1);void 0===c.zb&&(c.zb=!1);void 0===
c.Ab&&(c.Ab=!1);void 0===c.la&&(c.la=4);void 0===c.xb&&(c.xb=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?Ga(c.data):c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=!1);var M=0,S=c.D?!0:!1,Z=null,X=null,ka=!1,ua=null;c.isFloat&&(c.I=!0);c.I&&(M=1);c.xb||Ja.o()||!c.isFloat||!da||Ja.jb()||(c.isFloat=!1);c.isFloat&&(M=2);c.xa&&C&&!JEContext.Md()&&(c.xa=!1);var Y=
a.createTexture(),ca=c.Ha,G=null,U=!1,D=0,y=0,x=!1,F=h++,na=!1,R,ja,Ca,ra,aa,ea,fa,pa=c.isFlipY,sa=c.I&&c.isMipmap&&"undefined"!==typeof Ia&&!Ia.gc()?!0:!1,va,la=-1,za=!1;"undefined"!==typeof c.width&&c.width&&(D=c.width,y="undefined"!==typeof c.height&&c.height?c.height:D);var V={get:function(){return Y},w:function(){return D},L:function(){return y},Jd:function(){return c.url},Nd:function(){return c.isFloat},Pd:function(){return c.I},Qd:function(){return c.isLinear},Pa:function(){a.generateMipmap(a.TEXTURE_2D)},
ib:function(k,A){sa?(k||(k=V.rb()),V.Fa(A),b(va[k]),r[A]=-1):V.b(A)},rb:function(){-1===la&&(la=Math.log(D)/Math.log(2));return la},pb:function(k){if(sa){k||(k=V.rb());t.set("s11");V.Fa(0);var A,ma=D,ta=y;for(A=1;A<=k;++A)ma/=2,ta/=2,t.P("u7",.25/ma,.25/ta),a.viewport(0,0,ma,ta),b(va[A-1]),a.framebufferTexture2D(J.aa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,va[A],0),N.g(!1,1===A);r[0]=-1}else V.Pa()},Fa:function(k){k!==u&&(a.activeTexture(q[k]),u=k)},b:function(k){if(!x)return!1;V.Fa(k);if(r[k]===F)return!1;
b(Y);r[k]=F;return!0},hb:function(k){a.activeTexture(q[k]);u=k;b(Y);r[k]=F},j:function(){a.framebufferTexture2D(J.aa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Y,0)},A:function(){a.viewport(0,0,D,y);a.framebufferTexture2D(J.aa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Y,0)},de:function(){a.framebufferTexture2D(J.aa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},resize:function(k,A){D=k;y=A;H()},clone:function(k){k=ba.a({width:D,height:y,I:c.I,isFloat:c.isFloat,isLinear:c.isLinear,U:c.U,isFlipY:k?!pa:pa,isPot:c.isPot});
Ha.set("s0");J.R();k.j();a.viewport(0,0,D,y);V.b(0);N.g(!0,!0);return k},Yc:function(){a.viewport(0,0,D,y)},remove:function(){a.deleteTexture(Y);V=null},refresh:function(){V.hb(0);pa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);S?a.texImage2D(a.TEXTURE_2D,0,aa,ea,a.UNSIGNED_BYTE,c.D):a.texImage2D(a.TEXTURE_2D,0,aa,D,y,0,ea,fa,U);pa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},kb:function(){var k=D*y*4;ja=[new Uint8Array(k),new Uint8Array(k),new Uint8Array(k),new Uint8Array(k)];R=[new Float32Array(ja[0].buffer),
new Float32Array(ja[1].buffer),new Float32Array(ja[2].buffer),new Float32Array(ja[3].buffer)];Ca=new Uint8Array(4*k);ra=new Float32Array(Ca.buffer);na=!0},Mb:function(){na||V.kb();a.readPixels(0,0,D,4*y,a.RGBA,a.UNSIGNED_BYTE,Ca);var k,A=D*y,ma=2*A,ta=3*A;for(k=0;k<A;++k)R[0][k]=ra[k],R[1][k]=ra[k+A],R[2][k]=ra[k+ma],R[3][k]=ra[k+ta];return R},lb:function(){J.J();t.set("s12");V.b(0);for(var k=0;4>k;++k)a.viewport(0,y*k,D,y),t.Pb("u8",B[k]),N.g(!1,0===k)},ee:function(k){var A=fa===v[0]&&!n();b(Y);
pa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,pa);A?(ka||(Z=document.createElement("canvas"),Z.width=D,Z.height=y,X=Z.getContext("2d"),ua=X.createImageData(D,y),ka=!0),ua.data.set(k),X.putImageData(ua,0,0),a.texImage2D(a.TEXTURE_2D,0,aa,ea,fa,Z)):a.texImage2D(a.TEXTURE_2D,0,aa,D,y,0,ea,fa,k);r[u]=F;pa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},fe:function(k,A){b(Y);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,A);a.texImage2D(a.TEXTURE_2D,0,aa,ea,fa,k);r[u]=F;A&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Vd:function(k,
A){var ma=D*y,ta=4*ma;k=c.I?k?"RGBE":"JSON":"RGBA";A&&(k=A);A=Ja.o()&&!1;switch(k){case "RGBE":var e="s41";break;case "JSON":e=A?"s0":"s12";break;case "RGBA":case "RGBAARRAY":e="s6"}na||("RGBA"===k||"RGBE"===k||"RGBAARRAY"===k?(ja=new Uint8Array(ta),na=!0):"JSON"!==k||A||V.kb());J.J();t.set(e);V.b(0);if("RGBA"===k||"RGBE"===k||"RGBAARRAY"===k){a.viewport(0,0,D,y);N.g(!0,!0);a.readPixels(0,0,D,y,a.RGBA,a.UNSIGNED_BYTE,ja);if("RGBAARRAY"===k)return{data:ja};P||(L=document.createElement("canvas"),K=
L.getContext("2d"),P=!0);L.width=D;L.height=y;g=K.createImageData(D,y);g.data.set(ja);K.putImageData(g,0,0);var p=L.toDataURL("image/png")}else if("JSON"===k)if(A)p=new Float32Array(ma),a.viewport(0,0,D,y),N.g(!0,!0),a.readPixels(0,0,D,y,a.RGBA,a.FLOAT,p);else{for(p=0;4>p;++p)a.viewport(0,y*p,D,y),t.Pb("u8",B[p]),N.g(!p,!p);V.Mb();p=Array(ma);for(e=0;e<ma;++e)p[4*e]=R[0][e],p[4*e+1]=R[1][e],p[4*e+2]=R[2][e],p[4*e+3]=R[3][e]}return{format:k,data:p,width:D,height:y,isMirrorY:c.U,isFlipY:"RGBA"===k?
c.isFlipY:!c.isFlipY}}};c.isMipmap&&!sa&&x&&!za&&(V.Pa(),za=!0);if(c.url)b(Y),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),G=new Image,G.pd="Anonymous",G.crossOrigin="Anonymous",G.src=c.url,G.onload=function(){D=G.width;y=G.height;H()};else if(c.D){var xa=function(){D=void 0!==c.D.videoWidth?c.D.videoWidth:c.D.width;y=void 0!==c.D.videoHeight?c.D.videoHeight:c.D.height;D?H():setTimeout(xa,1)};xa()}else c.array?(c.I&&!c.isFloat?c.array instanceof Uint16Array?(U=c.array,H()):
m()?(U=f(c.array),H()):(H(),ba.tc(V,c.array,pa)):(U=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),H()),c.isKeepArray||(U&&U!==c.array&&(U=null),delete c.array)):H();V.yc=V.w;ca&&x&&(ca(V),ca=!1);return V},J:function(c){c!==u&&(a.activeTexture(q[c]),u=c);r[c]=-1;b(null)},kd:function(c){w.random.b(c)},reset:function(){for(var c=0;c<q.length;++c)r[c]=-1;u=-1},Ud:function(){u=-1},be:function(){for(var c=0;c<q.length;++c)ba.J(c)},
uc:function(){w&&(w.random.remove(),w.Rb.remove())},ce:function(c,H){if("RGBA"===c.format||"RGBE"===c.format){var M=new Image;M.src=c.data;M.onload=function(){ba.a({U:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,D:M,Ha:function(S){if("RGBA"===c.format)H(S);else{var Z=c.width,X=c.height,ka=ba.a({U:c.isMirrorY,isFloat:!0,width:Z,height:X,isFlipY:c.isFlipY});J.R();a.viewport(0,0,Z,X);t.set("s42");ka.j();S.b(0);N.g(!0,!0);ba.J(0);H(ka);a.flush();setTimeout(S.remove,50)}}})}}else"JSON"===c.format?H(ba.a({isFloat:!0,
isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):H(!1)}};return ba}(),La={a:function(b){var d=[W.a(b),W.a(b)],f=[d[1],d[0]],m=f,n={Vc:function(l){m[1].j();m[0].b(l);n.Qb()},Wd:function(l){m[1].A();m[0].b(l);n.Qb()},Qb:function(){m=m===d?f:d},refresh:function(){m[0].refresh();m[1].refresh()},b:function(l){m[0].b(l)},Cd:function(){return m[0]}};return n}},Ja=function(){function b(){d="undefined"===typeof Ka?JEContext:Ka;f=!0}var d,f=!1,m=!1,n=!1,l=!1,u=!1,q=!1,h=!1,
r=!1,w=!1,v=!1,E=!1,I=!0,O=!0,P=!0,L=!1,K="undefined"===typeof window?{}:window,g={l:function(){if(f)return!0;b();g.nb();g.Oa();g.oc();g.pc();J.l();W.l();if(!g.kc())return!1;N.l();W.Bc();return!0},w:function(){f||b();return d.w()},L:function(){f||b();return d.L()},o:function(){f||b();return d.o()},oc:function(){E=(v=a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_color_buffer_float"))?!0:!1;K.GL_EXT_COLORBUFFERFLOAT=v},pc:function(){a.getExtension("EXT_color_buffer_half_float")||
a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},nb:function(){if(!m){this.o()||(n=a.getExtension("OES_texture_float")||a.getExtension("MOZ_OES_texture_float")||a.getExtension("WEBKIT_OES_texture_float"),u=(K.GL_EXT_FLOAT=n)?!0:!1);if(u||this.o())l=a.getExtension("OES_texture_float_linear")||a.getExtension("MOZ_OES_texture_float_linear")||a.getExtension("WEBKIT_OES_texture_float_linear"),K.GL_EXT_FLOATLINEAR=l;m=!0}},Oa:function(){if(!w){if(!this.o()){if(q=
a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))L=q.HALF_FLOAT_OES,h=!0;!L&&a.HALF_FLOAT&&(L=a.HALF_FLOAT);!L&&a.FLOAT&&(L=a.FLOAT);K.GL_EXT_HALFFLOAT=q}if(h||this.o())r=a.getExtension("OES_texture_half_float_linear")||a.getExtension("MOZ_OES_texture_half_float_linear")||a.getExtension("WEBKIT_OES_texture_half_float_linear"),K.GL_EXT_HALFFLOATLINEAR=r;w=!0}},va:function(){if(g.o())return a.HALF_FLOAT;g.Oa();return h?
L:a.FLOAT},jb:function(){return I},fc:function(){return O},ld:function(){return P},ec:function(){return E},mc:function(){O=I=!0;var B=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,B);var C=a.createTexture();a.bindTexture(a.TEXTURE_2D,C);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,g.o()&&a.RGBA32F?a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(J.aa(),a.COLOR_ATTACHMENT0,
a.TEXTURE_2D,C,0);var da=a.checkFramebufferStatus(J.Qa());da!==a.FRAMEBUFFER_COMPLETE&&(I=!1);a.texImage2D(a.TEXTURE_2D,0,g.o()&&a.RGBA16F?a.RGBA16F:a.RGBA,1,1,0,a.RGBA,g.va(),null);a.framebufferTexture2D(J.aa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,C,0);da=a.checkFramebufferStatus(J.Qa());da!==a.FRAMEBUFFER_COMPLETE&&(O=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.deleteTexture(C);a.deleteFramebuffer(B)},lc:function(){var B=J.a({width:1});B.Nb();var C=W.a({width:1,isFloat:!0,
la:3});B.j();C.j();a.flush();a.checkFramebufferStatus(J.Qa())!==a.FRAMEBUFFER_COMPLETE?(W.Sc(),P=!1):P=!0;B.remove();C.remove()},kc:function(){g.mc();if(!I&&!O)return!1;g.lc();return!0}};return g}(),Ia=function(){function b(I,O,P,L){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,L?a.NEAREST_MIPMAP_NEAREST:a.LINEAR);try{var K=a.getError();K!==a.NO_ERROR&&console.log("GLERR in test_mipmapping() :",K);a.texImage2D(a.TEXTURE_2D,0,I,2,2,0,a.RGBA,O,P);K=a.getError();if(K!==a.NO_ERROR)return!1}catch(g){return!1}L&&
a.generateMipmap(a.TEXTURE_2D);N.fa();N.g(!1,!0);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,q);K=a.getError();K===a.INVALID_OPERATION&&"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,q),K=a.getError());return K!==a.NO_ERROR?!1:0!==q[0]}function d(I){return Ja.jb()&&b(internalPixelFormat32f,a.FLOAT,new Float32Array(r),I)?(l=n.eb,!0):!1}function f(I){return Ja.fc()?b(v,Ja.va(),new Uint16Array(r),I)||b(v,a.FLOAT,new Float32Array(r),
I)?(l=n.Ea,!0):!1:!1}var m=!1,n={eb:3,Ea:2,RGBA8:0},l=n.RGBA8,u,q=new Uint8Array(4),h=[.8,1,.8,1],r=h.concat(h,h,h),w=!0,v,E={l:function(){Ja.nb();Ja.Oa();v=a.RGBA;if(Ka.o()){var I=a.RGBA16F;I&&(v=I)}N.l();J.reset();J.J();a.viewport(0,0,1,1);t.set("s0");m=!0;u=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,u);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);
if(f(!0)||d(!0))return!0;w=!1;if(f(!1)||d(!1))return!0;if(Ka.o()){v=a.RGBA;if(f(!0)||d(!0))return!0;w=!1;if(f(!1)||d(!1))return!0}return!1},gc:function(){return w},Dd:function(){return l},Od:function(){m||E.l();return l===n.eb},Ec:function(){m||E.l();return l===n.Ea}};return E}(),Ma={a:function(b){var d=W.a(b.alpha),f=W.a(b.beta);return{nc:function(){d.b(1);f.b(2)}}}},Pa={a:function(b){var d=b.$c;d.index=b.index;d.V=b.V;d.parent=b.parent;switch(d.type){case "input":b=Na.a(d);break;default:b=Oa.a(d)}return b}},
Na={a:function(b){"undefined"===typeof b.sift&&(b.sift=!1);"undefined"===typeof b.DWT&&(b.DWT=!1);"undefined"===typeof b.blur&&(b.blur=!1);"undefined"===typeof b.siftOutWidth&&(b.siftOutWidth=!1);"undefined"===typeof b.density&&(b.density=1);var d=!1;if(b.mask){d=!0;SETTINGS&&void 0!==SETTINGS.ac&&(b.mask=SETTINGS.ac+b.mask);var f=W.a({isFloat:!1,url:b.mask})}var m=!1,n="undefined"!==typeof b.preprocessing?b.preprocessing:!1,l=!1,u=!1;b.sift?Sift.l({Ac:a,ha:!1,width:b.size,Sd:b.siftOutWidth}):b.DWT&&
DWT.l({Ac:a,ha:!1,width:b.size});var q=!1;b.customInputShader&&(q="s43",t.fb({name:"_",id:q,c:b.customInputShader,f:["uSource"],precision:"lowp"}),t.H(q,[{type:"1i",name:"_",value:0}]));switch(n){case "sobel":var h="s32";l=!0;break;case "meanNormalization":h="s33";l=!0;break;case "grayScale":h="s29";l=!1;break;case "grayScaleTilt":h="s30";u=!0;l=!1;break;case "rgbGrayTilt":h="s31";u=!0;l=!1;break;case "copy":h=q?q:"s0";break;case "inputLightRegulation":h=q?q:"s29";Qa.l({width:b.size,Eb:b.nBlurPass,
Dc:!1});m=!0;break;case "direct":case "none":h=!1;break;default:h="s3"}u&&t.H(h,[{name:"u28",type:"1f",value:b.tilt}]);d&&(h+="Mask");if(b.blur)var r=W.a({isFloat:!1,isPot:!1,width:b.size});var w=W.a({isFloat:!1,isPot:!1,width:b.size}),v={w:function(){return b.sift?Sift.ka():b.size},ka:function(){return v.w()},xc:function(){return b.sift?Sift.wa():b.DWT?DWT.wa():m?Qa.wa():w},F:function(){J.R();b.blur&&(r.A(),t.set("s44"),t.P("u7",1/b.size,1/b.size),N.g(!1,!0),r.b(0));h&&(t.set(h),l&&t.u("u29",1/b.size),
w.A(),d&&f.b(1),N.g(!1,!1),w.b(0),m?Qa.Xa(w):b.sift?(t.X(),Sift.Xa()):b.DWT&&(t.X(),DWT.Xa(4)))}};return v}},Oa={a:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var d=[],f=[],m,n,l=!1,u,q=!0,h,r,w=b.isReorganize?b.isReorganize:!1,v=b.kernelsNumber?!0:!1,E=b.dynPelu?Ma.a(b.dynPelu):!1,I=E?!0:!1,O={isEnabled:!1},P;if("softmax"===b.type){b.activation="softmax";b.size=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(b.num_classes))));b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:
b.V.ka();b.gain="undefined"!==typeof b.gain?b.gain:1;t.H("s20",[{type:"1f",name:"u10",value:b.gain}]);var L=W.a({isFloat:!0,isPot:!1,width:b.size}),K=W.a({isFloat:!0,isPot:!1,width:b.size,isMipmap:!0});q=!1;var g=new Uint8Array(Math.pow(4*b.size,2)),B;for(B=0;B<b.size*b.size;++B){var C=B<b.num_classes?255:0;g[4*B]=C;g[4*B+1]=C;g[4*B+2]=C;g[4*B+3]=C}var da=W.a({isFloat:!1,isPot:!1,width:b.size,array:g})}else b.cost?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.V.ka(),q=!1):"full"===b.connectivityUp&&
(b.sparsity=b.V.ka());var wa={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[b.activation],Ba=b.sparsity*b.sparsity,oa=!1,ba=b.size;if(b.maxPooling){switch(b.maxPooling.size){case 2:var c="s34";break;case 4:c="s35"}oa=!0;ba/=b.maxPooling.size;var H=W.a({isFloat:!0,isPot:!1,width:ba})}var M=void 0!==b.Kc&&b.Kc?!0:!1,S=null,Z=null,X=null;M&&(S="s45"+b.index.toString(),t.ub("s45",S,[((b.normalization.n-1)/2).toFixed(1)]),t.H(S,[{type:"1i",
name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u33",value:b.normalization.k}]),Z=W.a({isFloat:!0,isPot:!0,width:b.size}),X=W.a({isFloat:!0,isPot:!0,width:b.size}));var ka,ua,Y,ca;q&&(ca=W.a({isFloat:!0,isPot:!1,width:b.size}));var G=W.a(b.bias),U,D={w:function(){return b.size},ka:function(){return ba},sb:function(){return b.num_classes},cc:function(y){P.b(y)},Nc:function(){b.remap&&
b.remap.isEnabled&&(O={isEnabled:!0,Gc:W.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(y){return b.parent.wc(y)}),depth:b.remap.depth})},Uc:function(){switch(b.connectivityUp){case "gaussian":U=Ra.a(b.connectivity);break;case "direct":U=Sa.a(b.connectivity);break;case "square":U=Ta.a(b.connectivity);break;case "squareFast":U=Ua.a(b.connectivity,b.activation);break;case "full":U=Va.a(b.connectivity);
break;case "conv":r=b.kernelsNumber,U=Wa.a(b.connectivity),w&&(h=W.a({width:ba,isFloat:!0,isFlipY:!1,isPot:!1}))}if(U.W){var y=b.size*b.sparsity;ua=Math.log(y/b.size)/Math.log(2);ka=W.a({isMipmap:!0,isFloat:!0,isPot:!0,width:y,Cb:ua});Y=W.a({isFloat:!0,isPot:!0,width:b.size})}},F:function(y,x){P=y;U.W?(ka.A(),v&&G.b(2),U.F(O),ka.b(0),ka.pb(ua),Y.A(),v?t.set("s0"):(t.set("s28"),t.u("u27",Ba),G.b(1)),ka.ib(ua,0),N.g(!1,!1),t.set(wa),M?Z.j():ca.j(),Y.b(0),I&&E.nc(),N.g(!1,!1)):(ca.A(),G.b(1),U.F());
M&&(t.set(S),X.j(),Z.b(0),N.g(!1,!1),t.set("s46"),t.u("u6",1),ca.j(),X.b(1),N.g(!1,!1));if(q)return oa?(H.A(),ca.b(0),t.set(c),t.P("u7",1/b.size,1/b.size),N.g(!1,!1),x=H):x=ca,x.b(0),w&&(h.j(),t.set("s22"),t.P("u14",r,ba/r),N.g(!1,!1),x=h,h.b(0)),x;if("softmax"===b.type){t.set("s20");ca.b(0);L.j();N.g(!1,!1);b.disableNormalize?y=L:(t.set("s2"),L.b(0),da.b(1),K.j(),N.g(!1,!1),t.set("s0"),n.A(),K.b(0),K.pb(!1),N.g(!1,!1),t.set("s21"),m.A(),K.ib(!1,0),t.u("u12",ca.yc()),n.b(1),N.g(!1,!1),y=m);if(x){switch(l){case "cpuRGBAAvg":break;
default:var F=D.Lb(y)}return F}return!1}if(b.cost){t.set("gpuRawAvg"===l?"s8":"s7");x=ca;b.disableNormalize||(t.u("u4",1/b.size),m.A(),ca.b(0),N.g(!1,!1),x=m);switch(l){case "cpuRGBA2Float":x.lb();F=D.Lb(x);u(F);break;case "gpuRawAvg":case "gpuRaw":x.b(0),u(x)}return!1}},ic:function(y){y&&"undefined"!==typeof y.Jb&&(l=y.Jb,u=y.Mc);ca=W.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===b.type,width:b.size});"softmax"===b.type&&(n=W.a({isFloat:!0,isPot:!0,width:1}));var x=0,F=0,na="undefined"!==typeof b.num_classes&&
b.num_classes?b.num_classes:b.size*b.size;for(y=0;y<na;++y)d.push(x+(b.size-1-F)*b.size),f.push([-1,-1,-1,-1]),++x,x===b.size&&(x=0,++F);b.disableNormalize||(m=W.a({isFloat:!0,isPot:!0,width:b.size}))},Lb:function(y){y.lb();var x=y.Mb();d.forEach(function(F,na){f[na][0]=x[0][F];f[na][1]=x[1][F];f[na][2]=x[2][F];f[na][3]=x[3][F]});return f}};b.V&&D.Uc(b.V);return D}};
function Xa(){var b={Ld:!1},d,f,m;b||(b={});this.wc=function(n){return d[n]};this.Qc=function(n){var l=!1;d=n.map(function(u,q){return l=u=Pa.a({index:q,parent:this,$c:u,V:l})});f=d[0];m=d[d.length-1];d.forEach(function(u,q){0!==q&&u.Nc()})};this.F=function(n,l){var u=l;d.forEach(function(q){u=q.F(u,n)});return u};this.qb=function(){return f.w()};this.wa=function(){return m.xc()};this.Tc=function(n){m.ic(n)};this.sb=function(){return m.sb()}}
var Sa={a:function(b){var d=W.a(b.weights);delete b.weights.data;return{W:!0,ja:function(){return 1},zc:function(){return d},F:function(){t.set("s27");d.b(1);N.g(!1,!1)}}}},Va={a:function(b){var d=b.fromLayerSize,f=W.a(b.weights);return{W:!0,ja:function(){return d},F:function(m){if(m.isEnabled){t.set("s25");m.Gc.b(3);var n,l=Math.min(m.layers.length,m.depth);for(n=0;n<l;++n)m.layers[n].cc(4+n)}else t.set("s24");t.u("u18",b.toLayerSize);f.b(1);N.g(!1,!1)}}}},Ra={a:function(b){var d=b.toSparsity*b.toLayerSize,
f=d/b.fromLayerSize,m=W.a(b.weights);W.a({width:d,isFloat:!0,array:new Float32Array(b.fromBindings),isPot:!0});var n=W.a({width:d,isFloat:!0,array:new Float32Array(b.toBindings),isPot:!0});return{W:!0,ja:function(){return f},F:function(){t.set("s23");m.b(1);n.b(2);N.g(!1,!0)}}}},Ta={a:function(b){var d=b.fromLayerSize,f=b.toLayerSize,m=b.toSparsity,n=m*f,l=n/d,u=d/f,q,h,r,w,v=0,E=0,I=0,O=Array(m*f*m*f*4),P=Array(m*f*m*f*4),L=Array(d*d);for(q=0;q<L.length;++q)L[q]=0;var K=Math.floor(m/2),g=.5/f,B=
.5/d,C=.5/n;for(q=0;q<f;++q)for(h=0;h<f;++h){var da=Math.round(q*u);var wa=Math.round(h*u);var Ba=q/f;var oa=h/f;Ba+=g;oa+=g;for(r=0;r<m;++r)for(w=0;w<m;++w){var ba=v/n;var c=E/n;var H=da+r-K;var M=wa+w-K;0>H&&(H+=d);0>M&&(M+=d);H>=d&&(H-=d);M>=d&&(M-=d);var S=H/d;var Z=M/d;c=1-c-1/n;S+=B;Z+=B;ba+=C;c+=C;var X=q*m+r,ka=h*m+w;ka=f*m-ka-1;X=ka*f*m+X;O[4*X]=ba;O[4*X+1]=c;O[4*X+2]=S;O[4*X+3]=Z;S=L[M*d+H]++;Z=S%l;H=H*l+Z;M=M*l+(S-Z)/l;M=d*l-1-M;M=M*d*l+H;P[4*M]=ba;P[4*M+1]=c;P[4*M+2]=Ba;P[4*M+3]=oa;++v>=
n&&(v=0,++E);++I}}var ua=W.a(b.weights);W.a({width:n,isFloat:!0,array:new Float32Array(P),isPot:!0});P=null;var Y=W.a({width:n,isFloat:!0,array:new Float32Array(O),isPot:!0});O=null;return{W:!0,ja:function(){return l},F:function(){t.set("s23");ua.b(1);Y.b(2);N.g(!1,!1)}}}},Wa={a:function(b){var d=b.kernelsNumber,f=b.toSparsity,m=f*b.toLayerSize/b.fromLayerSize,n=W.a(b.weights);return{W:!0,ja:function(){return m},Hd:function(){return f},zc:function(){return n},F:function(){t.set("s26");t.u("u24",d);
t.u("u25",f);t.u("u18",b.toLayerSize);t.u("u26",b.fromLayerSize);n.b(1);N.g(!1,!1)}}}},Ua={a:function(b,d){var f=b.fromLayerSize,m=b.toLayerSize,n=b.toSparsity,l=b.stride?b.stride:1,u=n*m/f,q=m<f,h=f/m,r=W.a(b.weights),w="s47"+[f.toString(),m.toString(),n.toString(),l.toString(),d].join("_");t.qc(w)||(b=Da(d),m=[{type:"1f",name:"u18",value:m},{type:"1f",name:"u32",value:l}],q&&m.push({type:"1f",name:"u26",value:f}),f=[(q?u:n).toFixed(1),b],q&&f.push(h.toFixed(1)),t.ub(q?"s40":"s39",w,f),t.H(w,m.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{W:!1,ja:function(){return u},F:function(){t.set(w);r.b(3);N.g(!1,!1)}}}},Qa=function(){var b,d,f,m,n,l,u,q,h;return{l:function(r){b=r.Eb?r.Eb:3;d=r.width?r.width:64;m=r.Dc?!0:!1;r={isFloat:!1,width:d,isPot:!1,isFlipY:!1};n=W.a(r);l=W.a(r);u=W.a(r);q=W.a(r);h=W.a({isFloat:!0,width:d,isPot:!1,isFlipY:!1});f=1/d},Xa:function(r){t.set("s37");for(var w=0;w<b;++w)n.j(),t.P("u7",f,0),N.g(m,!1),l.j(),n.b(0),t.P("u7",
0,f),N.g(m,!1),l.b(0);t.set("s36");q.j();r.b(0);N.g(m);t.set("s37");for(w=0;w<b;++w)u.j(),q.b(0),t.P("u7",f,0),N.g(m,!1),q.j(),u.b(0),t.P("u7",0,f),N.g(m,!1);t.set("s38");h.j();r.b(0);l.b(1);q.b(2);N.g(m,!1);h.b(0)},wa:function(){return h}}}();function Ya(b,d){b[d]=!0;b.setAttribute(d,"true")}function Za(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function $a(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]}function ab(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function bb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function cb(b){if(!b)return b;var d=!1;if(b.video){var f=function(m){var n={};"undefined"!==typeof m.min&&(n.min=m.min);"undefined"!==typeof m.max&&(n.max=m.max);"undefined"!==typeof m.ideal&&(n.ideal=m.ideal);return n};d={};"undefined"!==typeof b.video.width&&(d.width=f(b.video.width));"undefined"!==typeof b.video.height&&(d.height=f(b.video.height));"undefined"!==typeof b.video.facingMode&&(d.facingMode=b.video.facingMode)}d={audio:b.audio,video:d};"undefined"!==typeof b.deviceId&&(d.deviceId=b.deviceId);
return d}function db(b){var d=b.video.width;b.video.width=b.video.height;b.video.height=d;return b}
function eb(b){function d(v){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(E,I){return Math.abs(E-v)-Math.abs(I-v)})}function f(v){var E=cb(b);m.push(v(E))}var m=[];if(!b||!b.video)return m;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal)for(var n=d(b.video.width.ideal).slice(0,3),l=d(b.video.height.ideal).slice(0,3),u=0,q;u<n.length;++u){q=n[u];for(var h=0,r;h<l.length;++h)if(r=l[h],q!==b.video.width.ideal||r!==b.video.height.ideal){var w=
Math.max(q,r)/Math.min(q,r);w<4/3-.1||w>16/9+.1||f(function(v){v.video.width.ideal=q;v.video.height.ideal=r;return v})}}f(function(v){return db(v)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&f(function(v){delete v.video.width.ideal;delete v.video.height.ideal;return v}),f(function(v){delete v.video.width;delete v.video.height;return v}));b.video.facingMode&&(f(function(v){delete v.video.facingMode;return v}),b.video.width&&b.video.height&&f(function(v){db(v);delete v.video.facingMode;
return v}));m.push({audio:b.audio,video:!0});return m}function fb(b){try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(m){d=window.innerHeight>window.innerWidth}if(d&&b&&b.video){d=b.video.width;var f=b.video.height;d&&f&&d.ideal&&f.ideal&&d.ideal>f.ideal&&(b.video.height=d,b.video.width=f)}}
function gb(b){b.volume=0;Ya(b,"muted");if(ab()){if(1===b.volume){var d=function(){b.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){b.volume=0;Ya(b,"muted")},5)}}
function hb(b,d,f,m){function n(u){l||(l=!0,f(u))}var l=!1;navigator.mediaDevices.getUserMedia(m).then(function(u){function q(){setTimeout(function(){if(b.currentTime){var h=b.videoWidth,r=b.videoHeight;if(0===h||0===r)n("VIDEO_NULLSIZE");else{h&&(b.style.width=h.toString()+"px");r&&(b.style.height=r.toString()+"px");h={hc:null,Zc:null,Hc:null};try{var w=u.getVideoTracks()[0];w&&(h.Hc=w,h.hc=w.getCapabilities(),h.Zc=w.getSettings())}catch(v){}ab()||Za()?b.parentNode&&null!==b.parentNode?(l||d(b,u,
h),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),gb(b),l||d(b,u,h),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";gb(b);setTimeout(function(){b.play()},100)},80)):l||d(b,u,h)}}else n("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=u:(b.src=window.URL.createObjectURL(u),b.videoStream=u);gb(b);b.addEventListener("loadeddata",function(){var h=b.play();gb(b);"undefined"===typeof h?
q():h.then(function(){q()}).catch(function(){n("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(u){n(u)})}
function ib(b,d,f){var m=bb()?document.createElement("video"):!1;if(m)if(bb()){if(f&&f.video){if(Za()){var n=$a();(12>n[0]||12===n[0]&&2>n[1])&&fb(f)}f.video.width&&f.video.width.ideal&&(m.style.width=f.video.width.ideal+"px");f.video.height&&f.video.height.ideal&&(m.style.height=f.video.height.ideal+"px")}Ya(m,"autoplay");Ya(m,"playsinline");f&&f.audio?m.volume=0:Ya(m,"muted");hb(m,b,function(){function l(q){if(0===q.length)d("INVALID_FALLBACKCONSTRAINS");else{var h=q.shift();hb(m,b,function(){l(q)},
h)}}var u=eb(f);l(u)},f)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}function jb(b){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return b(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(d){(d=d.filter(function(f){return f.kind&&-1!==f.kind.toLowerCase().indexOf("video")&&f.label&&f.deviceId}))&&d.length&&0<d.length?b(d,!1):b(!1,"NODEVICESFOUND")}).catch(function(){b(!1,"PROMISEREJECTED")})}
window.JEEFACEFILTERAPI=function(){var b,d,f,m,n,l,u,q,h,r,w,v,E,I;function O(e){if(y!==D.pause){var p=y===D.play?F.ra:G.$b;za=setTimeout(g.bind(null,e),p)}}function P(){if(y===D.play)return!1;y=D.play;A.timestamp=Date.now();V&&window.cancelAnimationFrame(V);g(0)}function L(e,p,z,T,Q){e=4*(3*p+e)+z;return T+(sa[e]/255+sa[e+12]/65025)*(Q-T)}function K(){J.R();N.reset();W.reset();t.X();t.mb();a.disable(a.DEPTH_TEST);a.disable(a.BLEND);N.fa();t.na()}function g(){if(y!==D.pause){t.mb();N.reset();N.fa();
a.disable(a.DEPTH_TEST);J.R();t.na();if(!x.Ta){var e=x.element.currentTime-x.Ba;0>e&&(x.Ba=x.element.currentTime);1E3*e<G.fd||(x.oa.refresh(),x.Ba+=e,t.set("s50"),x.pa.A(),x.oa.b(0),N.g(!1,!1))}if(k.K.length>A.G)k.K.splice(0,k.K.length-A.G);else for(;k.K.length<A.G;)k.K.push(0);if(1!==k.i)if(la.every(oa)){for(var p=0,z=e=0;z<la.length;++z)la[z].detected>p&&(p=la[z].detected,e=0);for(p=0;p<A.G;++p)k.K[p]=e}else{p=0;e=!1;for(z=k.Bb;p<A.G;++p){if(oa(la[z]))if(e){do++z===k.i&&(z=0);while(oa(la[z]))}else e=
!0;k.K[p]=z++;z>=k.i&&(z=0)}k.Bb=z}for(e=0;e<A.G;++e)k.S=k.K[e],k.Wa=(.5+k.S)/k.i,k.yb=k.K.lastIndexOf(k.S)===e,t.set("s51"),F.$&&t.u("u38",la[k.S].rz),1!==k.i&&t.u("u37",k.Wa),fa.A(),x.pa.b(0),pa.b(1),N.g(!1,!1),fa.b(0),na.F(!1,fa);e=Date.now();A.ia=e-A.timestamp;A.timestamp=e;-1!==R.nDetectsPerLoop?A.G=R.nDetectsPerLoop:(e=G.Ga,A.Gb=A.Fb/A.ia,A.Hb=A.Gb*e+A.Hb*(1-e),A.Ib=1E3/A.ia,A.ba=A.Ib*G.Ga+A.ba*(1-G.Ga),A.ba>G.Z[1]?(e=G.qa[1],1<k.i&&(e+=1,p=la.filter(ba).length,e*=Math.max(1,p)),A.G=Math.min(A.G+
1,e),A.ba=(G.Z[0]+G.Z[1])/2):A.ba<G.Z[0]&&(A.G=Math.max(A.G-1,G.qa[0]),A.ba=(G.Z[0]+G.Z[1])/2));J.J();a.viewport(0,0,3,2*k.i);t.set("s49");pa.b(0);N.g(!1,!1);a.readPixels(0,0,3,2*k.i,a.RGBA,a.UNSIGNED_BYTE,sa);for(e=0;e<k.i;++e)if(-1!==k.K.indexOf(e)){var T=e;p=va[T];var Q=[T];z=la[T];var ha=ma[T],qa=2*T;p.ua=L(1,qa,3,0,1);z.detected=ia(z.detected,p.ua,G.Xb);if(p.ua<G.Va)F.$&&(z.rz=0);else{p.x=L(0,qa,1,-1,1);p.y=L(0,qa,2,-1,1);p.M=L(0,qa,3,0,1);p.Ya=L(1,qa,0,-xa[0],xa[0]);p.Za=L(1,qa,1,-xa[1],xa[1]);
p.ma=L(1,qa,2,-xa[2],xa[2]);for(var Fa=0;Fa<G.Aa;++Fa)p.ob[Fa]=G.rc[Fa](L(2,qa,Fa,0,1));Q.Ma=p.x-z.x;Q.Na=p.y-z.y;Q.La=p.M-z.s;Q.Ia=p.Ya-z.rx;Q.Ja=p.Za-z.ry;Q.Ka=F.$?p.ma:p.ma-z.rz;qa=Math.sqrt(Q.Ma*Q.Ma+Q.Na*Q.Na+Q.La*Q.La)/A.ia;Q=Math.sqrt(Q.Ia*Q.Ia+Q.Ja*Q.Ja+Q.Ka*Q.Ka)/A.ia;qa=1-Aa(ja.translationFactorRange[0],ja.translationFactorRange[1],qa);Q=1-Aa(ja.rotationFactorRange[0],ja.rotationFactorRange[1],Q);Q=qa*Q*Aa(ja.qualityFactorRange[0],ja.qualityFactorRange[1],p.ua);T=ha[++ta[T]%ha.length]=Q;
for(qa=0;qa<ha.length;++qa)T=Math.min(T,ha[qa]);T=Math.max(.5,T);Q=Math.min(T,Q);ha=ia(ja.alphaRange[1],ja.alphaRange[0],Math.pow(Q,G.Zb));z.x=ia(z.x,p.x,ha);z.y=ia(z.y,p.y,ha);z.s=ia(z.s,p.M,ha);z.rx=ia(z.rx,p.Ya,ha);z.ry=ia(z.ry,p.Za,ha);z.rz=F.$?z.rz+ha*p.ma:ia(z.rz,p.ma,ha);ha=Math.max(ha,G.Yb);for(T=0;T<G.Aa;++T)z.expressions[T]=ia(z.expressions[T],p.ob[T],ha);++p.za}}J.dd();J.reset();W.reset();a.enable(a.DEPTH_TEST);F.ta&&(1===k.i?F.ta(la[0]):F.ta(la));a.disable(a.BLEND);y===D.play&&(V=window.requestAnimationFrame(O))}}
function B(){function e(z){for(var T=[],Q=0;Q<k.i;++Q)T.push(Object.assign({},z));return T}x.pa=W.a({isPot:!1,isLinear:!0,isFloat:!1,width:ra,height:aa});fa=W.a({isPot:!0,isFloat:!1,width:na.qb()});var p={width:3,height:k.i,isFloat:!0,isPot:!1,array:function(z){for(var T=new Float32Array(z.length*k.i),Q=0,ha;Q<k.i;++Q)for(ha=0;ha<z.length;++ha)T[Q*z.length+ha]=z[ha];return T}(new Float32Array([0,R.borderWidth,R.borderHeight,0,0,0,0,0,0,0,0,0]))};pa=La.a(p);sa=new Uint8Array(8*p.width*k.i);va=e({ua:0,
x:0,y:0,M:1,Ya:0,Za:0,ma:0,ob:new Float32Array(G.Aa),za:0});la=e({detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,expressions:new Float32Array(G.Aa)});e({Ma:0,Na:0,La:0,Ia:0,Ja:0,Ka:0})}function C(){t.H("s51",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u35",value:1},{type:"2f",name:"u36",value:ea},{type:"1f",name:"u37",value:.5},{type:"1f",name:"u38",value:0}]);t.H("s52",[{type:"1i",name:"u39",value:0},{type:"1i",name:"u35",value:1},{type:"1f",name:"u42",value:G.cd},{type:"1f",name:"u43",value:G.Ub},{type:"1f",
name:"u44",value:G.Tb},{type:"3f",name:"u41",value:[G.ab[0]*ea[0],G.ab[1]*ea[1],G.ab[2]]},{type:"1f",name:"u37",value:.5},{type:"1f",name:"u45",value:1},{type:"1f",name:"u38",value:0}]);var e=[{type:"1i",name:"u39",value:0}];t.H("s53",e);t.H("s54",e);t.H("s49",[{type:"1i",name:"u35",value:0},{type:"1f",name:"u48",value:ea[0]},{type:"2f",name:"u47",value:[0,.5/k.i]}])}function da(){var e=na.qb(),p=ra/e;l=R.minScale*p;u=R.maxScale*p;q=(1-2*R.borderWidth)/R.nStepsX;h=(1-2*R.borderHeight)/R.nStepsY;r=
(u-l)/R.nStepsScale;w=R.borderWidth;v=R.borderHeight;E=1-R.borderWidth;I=1-R.borderHeight;ea=[e/ra,e/aa];b=R.borderWidth;d=R.borderHeight;f=l;m=R.borderWidth;n=R.borderHeight;Ca=l}function wa(e){if(F.ca)load_NNC("string"===typeof F.ca?JSON.parse(F.ca):F.ca,e);else{var p=F.cb;"JSON"!==p.toUpperCase().split(".").pop()&&(p+=G.save);ya(p,function(z){z=JSON.parse(z);z.exportData&&z.exportData.thetaXYZfactor&&(xa=z.exportData.thetaXYZfactor);e(z)})}}function Ba(){if(Ka.l({ha:F.N,width:ra,height:aa,debug:!1,
Lc:function(){Y("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0})){if(Ka.Cc())return!0;Y("GL_INCOMPATIBLE");return!1}Y("GL_INCOMPATIBLE");return!1}function oa(e){return e.detected<G.Va}function ba(e){return e.detected>G.Va}function c(e,p,z,T){return z>e?Math.max(0,e+p/2-(z-T/2)):Math.max(0,z+T/2-(e-p/2))}function H(){return va.some(function(e,p){if(p===k.S)return!1;p=va[k.S];if(p.za>e.za||3>e.za||c(p.x/2,p.M,e.x/2,e.M)<G.Db*p.M)return!1;var z=ra/aa;return c(p.y/2,p.M*z,e.y/2,e.M*z)>G.Db*p.M*
z})}function M(){var e=k.S;pa.Vc(1);1!==k.i&&(a.viewport(0,0,3,k.i),t.set("s0"),t.Ob("u1",1),N.g(!1,!1),t.Ob("u1",0));a.viewport(0,e,1,1);t.set("s52");F.$&&t.u("u38",la[e].rz);1!==k.i&&t.u("u37",k.Wa);if(1<k.i){var p=H()?0:1;t.u("u45",p)}t.Xc("u40",m,n,Ca);N.g(!1,!1);k.yb&&(a.viewport(1,e,1,1),t.set("s53"),N.g(!1,!1),a.viewport(2,e,1,1),t.set("s54"),N.g(!1,!1));f+=r;f>u&&(b+=q,f=l,b>E&&(b=w,d+=h,d>I&&(d=v)));m=b+.8*(Math.random()-.5)*q;n=d+.8*(Math.random()-.5)*h;Ca=f+.8*(Math.random()-.5)*r}function S(){x.oa=
W.a({D:x.element,isPot:!1,isFloat:!1,isFlipY:!0})}function Z(){t.H("s50",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u34",value:x.C}])}function X(){x.B[0]=.5;x.B[1]=.5;var e=x.O[1]/x.O[0],p=Ka.L()/Ka.w();90===Math.abs(U.rotate)&&(e=1/e);e>p?x.B[1]*=p/e:x.B[0]*=e/p;t.H("s52",[{name:"u46",type:"1f",value:p}]);x.C[0]=0;x.C[1]=0;x.C[2]=0;x.C[3]=0;switch(U.rotate){case 0:x.C[0]=x.B[0];x.C[3]=x.B[1];break;case 180:x.C[0]=-x.B[0];x.C[3]=-x.B[1];break;case 90:x.C[1]=x.B[0];x.C[2]=-x.B[1];break;case -90:x.C[1]=
-x.B[0],x.C[2]=x.B[1]}}function ka(e,p){if(y===D.error)return!1;var z=e.videoHeight;x.O[0]=e.videoWidth;x.O[1]=z;x.element=e;p&&p();return!0}function ua(e,p,z){e&&e();e={video:{facingMode:{ideal:U.facingMode},width:{min:U.minWidth,max:U.maxWidth,ideal:U.idealWidth},height:{min:U.minHeight,max:U.maxHeight,ideal:U.idealHeight}},audio:!1};U.deviceId&&(e.deviceId=U.deviceId);ib(function(T){p&&p(T);z(T)},function(){Y("WEBCAM_UNAVAILABLE")},e)}function Y(e){y!==D.error&&(y=D.error,F.ga_&&F.ga_(e))}function ca(e,
p){for(var z in e)"undefined"!==typeof p[z]&&(e[z]=p[z]);p===R&&R.nDetectsPerLoop&&(A.G=R.nDetectsPerLoop,A.Fb=R.nDetectsPerLoop)}var G={save:"NNC.json",gb:0,$b:25,Ga:.2,Z:[45,55],hd:1/3.5,qa:[2,6],Oc:{minScale:.15,maxScale:.6,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,nDetectsPerLoop:-1},ab:[.092,.092,.3],cd:50,Db:.12,Va:.6,Ic:8,Ub:.75,Tb:1,ad:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,.02],qualityFactorRange:[.9,.98],
alphaRange:[.05,1]},bd:[.65,1,.262],Xb:.2,Zb:2,Yb:.1,Jc:8,Aa:1,rc:[Aa.bind(null,.3,.75)],fd:20},U={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,rotate:0},D={Fc:-1,error:-2,tb:0,play:1,pause:2},y=D.tb,x={Ta:!1,element:!1,oa:!1,pa:!1,O:[0,0],B:[.5,.5],C:[.5,0,0,.5],Ba:0},F={ga_:!1,ta:!1,cb:"./",ca:!1,N:!1,ra:G.gb,Kb:G.gb,ya:!1,$:!1},na,R=Object.create(G.Oc),ja=Object.create(G.ad);var Ca=f=n=m=d=b=u=l=I=E=v=w=r=h=q=0;var ra,aa,ea,fa,pa,sa,va,
la,za=!1,V=!1,xa=G.bd,k={i:1,S:0,K:[0],yb:!1,Bb:0,Wa:0},A={ia:0,timestamp:0,Gb:0,Hb:0,G:G.qa[0],Fb:G.qa[0],Ib:0,ba:0,od:1},ma=[],ta=[];return{init:function(e){function p(){y!==D.error&&2===++T&&(X(),S(),Z(),F.ga_&&(F.ga_(!1,{GL:a,canvasElement:F.N,videoTexture:x.pa.get(),maxFacesDetected:k.i}),K()),P())}if(y!==D.tb)return e.callbackReady&&e.callbackReady("ALREADY_INITIALIZED"),!1;y=D.Fc;e.callbackReady&&(F.ga_=e.callbackReady);e.callbackTrack&&(F.ta=e.callbackTrack);"undefined"!==typeof e.animateDelay&&
(F.ra=e.animateDelay);"undefined"!==typeof e.NNCpath&&(F.cb=e.NNCpath);"undefined"!==typeof e.NNC&&(F.ca=e.NNC);"undefined"!==typeof e.maxFacesDetected&&(k.i=Math.max(1,e.maxFacesDetected));"undefined"!==typeof e.followZRot&&(F.$=e.followZRot?!0:!1);if(k.i>G.Ic)return Y("MAXFACES_TOOHIGH"),!1;if(!e.canvasId&&!e.canvas)return Y("NO_CANVASID"),!1;F.N=e.canvas?e.canvas:document.getElementById(e.canvasId);if(!F.N)return Y("INVALID_CANVASID"),!1;ra=F.N.width;aa=F.N.height;if(!ra||!aa)return Y("INVALID_CANVASDIMENSIONS"),
!1;for(var z=0;z<k.i;++z)ma.push(new Float32Array(G.Jc)),ta.push(0);e.scanSettings&&ca(R,e.scanSettings);e.stabilizationSettings&&ca(ja,e.stabilizationSettings);var T=0;e.videoSettings&&e.videoSettings.videoElement?ka(e.videoSettings.videoElement,p):(e.videoSettings&&ca(U,e.videoSettings),ua(e.onWebcamAsk,e.onWebcamGet,function(Q){ka(Q,p)}));wa(function(Q){if(!Ba())return!1;na=new Xa;na.Qc(Q.layers);na.Tc({Jb:"gpuRawAvg",Mc:M});t.Wb([{id:"s50",name:"_",Y:"attribute vec2 a0;uniform mat2 u34;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u34*a0;}",
sa:["a0"],da:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u34"],precision:"lowp"},{id:"s51",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Y:"attribute vec2 a0;uniform sampler2D u35;uniform vec2 u36;uniform float u37,u38;varying vec2 vv0;void main(){vec4 a=texture2D(u35,vec2(.17,u37));vec2 d=a.gb,e=a.a*u36;float b=cos(u38),c=sin(u38);vec2 g=mat2(b,c,-c,b)*a0;vv0=d+g*.5*e,gl_Position=vec4(a0,0.,1.);}",
sa:["a0"],da:[2],f:["u1","u35","u36","u37","u38"],precision:"lowp"},{id:"s52",name:"_",c:"uniform sampler2D u39,u35;uniform vec3 u40,u41;uniform float u42,u43,u44,u37,u45,u38,u46;const vec4 n=vec4(1.,1.,1.,1.),o=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u39,vec2(.625,.625)),h=texture2D(u39,vec2(.875,.625)),a=texture2D(u35,vec2(.17,u37));float b=dot(g,e),i=dot(h,e);bool j=b>u43&&b>i+u44;j?a.r=2.:a.r>u42?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u45;if(a.r<.9)a=vec4(1.,u40);else{a.r*=step(1.9,a.r);float k=dot(e,texture2D(u39,vec2(.875,.875))),l=dot(e,texture2D(u39,vec2(.125,.625))),m=dot(e,texture2D(u39,vec2(.375,.625))),c=cos(u38),d=sin(u38);vec2 f=mat2(c,d*u46,-d/u46,c)*vec2(k,l);a.gba+=vec3(f,m)*u41*a.a;}gl_FragColor=a;}",
Y:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",f:"u39 u35 u40 u42 u41 u45 u38 u46 u43 u44 u37".split(" ")},{id:"s53",name:"_",Y:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u39;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u39,vec2(.125,.875))),b=dot(e,texture2D(u39,vec2(.375,.875))),c=dot(e,texture2D(u39,vec2(.625,.875))),d=dot(e,texture2D(u39,vec2(.625,.625)));vec3 f=vec3(a,b,c)*.5+g;gl_FragColor=vec4(f,d);}",
f:["u39"]},{id:"s54",name:"_",Y:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u39;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u39,vec2(.25,.25)));gl_FragColor=vec4(a,0.,0.,0.);}",f:["u39"]},{id:"s49",name:"_",c:"uniform sampler2D u35;uniform vec2 u47;uniform float u48;varying vec2 vv0;void main(){float g=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u35,vv0+u47);a.a=mix(a.a*u48,a.a,c);vec4 d=floor(255.*a),f=255.*(255.*a-d),b=mix(d,f,g)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
f:["u35","u48","u47"]}]);B();da();C();p()});return!0},toggle_pause:function(e){if(-1!==[D.play,D.pause].indexOf(y))return e?y!==D.play?e=!1:(za&&(clearTimeout(za),za=!1),V&&(window.cancelAnimationFrame(V),V=!1),y=D.pause,e=!0):e=P(),e},toggle_slow:function(e){-1!==[D.play,D.pause].indexOf(y)&&y===D.play&&(e&&!F.ya?(F.Kb=F.ra,R.nDetectsPerLoop=1,this.Rc(100),F.ya=!0):!e&&F.ya&&(R.nDetectsPerLoop=-1,this.Rc(F.Kb),F.ya=!1))},set_animateDelay:function(e){F.ra=e},resize:function(){var e=F.N.width,p=F.N.height;
if(e===ra&&p===aa)return!1;ra=e;aa=p;da();C();X();Z();return!0},set_inputTexture:function(e,p,z){x.O[0]=p;x.O[1]=z;x.Ta=!0;X();K();Z();t.set("s50");x.pa.A();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,e);N.g(!0,!0)},reset_inputTexture:function(){x.O[0]=x.element.videoWidth;x.O[1]=x.element.videoHeight;x.Ta=!1;X();Z()},get_videoDevices:function(e){return jb(e)},set_scanSettings:function(e){ca(R,e);da();C()},set_stabilizationSettings:function(e){ca(ja,e)},update_videoElement:function(e,p){ka(e,
function(){S();X();p&&p()})}}}();
;return JEEFACEFILTERAPI;})();